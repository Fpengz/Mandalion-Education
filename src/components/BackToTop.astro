---
import '../styles/components/back-to-top.css';

const buttonId = 'back-to-top-button';
---

<button id={buttonId} class="back-to-top" type="button" aria-label="Back to top">
	<svg width="18" height="18" viewBox="0 0 24 24" aria-hidden="true" focusable="false">
		<path
			fill="currentColor"
			d="M12 5.586 5.293 12.293l1.414 1.414L11 9.414V20h2V9.414l4.293 4.293 1.414-1.414z"
		/>
	</svg>
</button>

<script is:inline>
	const backToTopButton = document.getElementById('back-to-top-button');

	const toggleVisibility = () => {
		if (!backToTopButton) return;
		if (window.scrollY > 320) {
			backToTopButton.dataset.visible = 'true';
		} else {
			delete backToTopButton.dataset.visible;
		}
	};

	backToTopButton?.addEventListener('click', () =>
		window.scrollTo({
			top: 0,
			behavior: 'smooth'
		})
	);

	window.addEventListener('scroll', toggleVisibility, { passive: true });
	window.addEventListener('load', toggleVisibility);
</script>
